{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center text-primary">Admin Panel</h1>
    <h2 class="text-center mb-4">Manage Flights</h2>
    
    <!-- Tabela z lotami -->
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Departure</th>
                <th>Arrival</th>
                <th>Date</th>
                <th>Price</th>
                <th>Seats</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for flight in flights %}
            <tr>
                <td>{{ flight.departure_city }}</td>
                <td>{{ flight.arrival_city }}</td>
                <td>{{ flight.date }}</td>
                <td>{{ flight.price }}</td>
                <td>{{ flight.available_seats }}</td>
                <td>
                    <a href="{{ url_for('edit_flight', flight_id=flight.id) }}" class="btn btn-primary btn-sm me-2">✏️ Edit</a>
                    <form action="{{ url_for('delete_flight', flight_id=flight.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-danger btn-sm">❌ Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Formularz dodawania nowego lotu -->
    <div class="mt-5">
        <h2 class="text-center mb-4">Add New Flight</h2>
        <form method="POST" class="row g-3">
            <div class="col-md-6">
                <label for="departure_city" class="form-label">Departure City</label>
                <input type="text" id="departure_city" name="departure_city" class="form-control" required>
            </div>
            <div class="col-md-6">
                <label for="arrival_city" class="form-label">Arrival City</label>
                <input type="text" id="arrival_city" name="arrival_city" class="form-control" required>
            </div>
            <div class="col-md-6">
                <label for="date" class="form-label">Date</label>
                <input type="date" id="date" name="date" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label for="price" class="form-label">Price</label>
                <input type="number" step="0.01" id="price" name="price" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label for="available_seats" class="form-label">Seats</label>
                <input type="number" id="available_seats" name="available_seats" class="form-control" required>
            </div>
            <div class="col-12 text-center">
                <button type="submit" class="btn btn-success mt-3">Add Flight ✈️</button>
            </div>
        </form>
    </div>

    <a href="{{ url_for('index') }}" class="btn btn-secondary mt-4">Back to Home</a>
</div>
{% endblock %}
